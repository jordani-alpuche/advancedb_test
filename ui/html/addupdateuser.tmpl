{{define "content"}}
<div class="page-wrapper">
  <div class="content">
    <div class="page-header">
      <div class="page-title">
        <h4>User Management</h4>
        <h6>Add/Update User</h6>
      </div>
    </div>

    <div class="card">
      <div class="card-body">
        <form method="POST" action="{{if eq .CurrentPageType "create"}}/user{{else}}/edit-user/{{.FormData.ID}}{{end}}">
             <!-- CSRF Token Field -->
          {{ .CSRFField  }}
          <div class="row">
            <div class="col-lg-3 col-sm-6 col-12">
              <div class="form-group">
                <label>First Name</label>
                <input type="text" id="FirstName" name="FirstName"
                placeholder="First Name" value="{{index .FormData
                "FirstName"}}" class="{{if index .FormErrors
                "FirstName"}}is-invalid{{end}}" /> {{with index .FormErrors
                "FirstName"}}
                <div class="invalid-feedback d-block">{{.}}</div>
                {{end}}
              </div>
            </div>
            <div class="col-lg-3 col-sm-6 col-12">
              <div class="form-group">
                <label>Last Name</label>
                  <input type="text" id="LastName" name="LastName"
                  placeholder="Last Name" value="{{index .FormData
                  "LastName"}}" class="{{if index .FormErrors
                  "LastName"}}is-invalid{{end}}" /> {{with index .FormErrors
                  "LastName"}}
                  <div class="invalid-feedback d-block">{{.}}</div>
                  {{end}}
              </div>
            </div>
            <div class="col-lg-3 col-sm-6 col-12">
              <div class="form-group">
                <label>User Name</label>
                  <input type="text" id="Username" name="Username"
                  placeholder="Username" value="{{index .FormData
                  "Username"}}" class="{{if index .FormErrors
                  "Username"}}is-invalid{{end}}" /> {{with index .FormErrors
                  "Username"}}
                  <div class="invalid-feedback d-block">{{.}}</div>
                  {{end}}
              </div>
            </div>

            <div class="col-lg-3 col-sm-6 col-12">
              <div class="form-group">
                <label>Password</label>
                <div class="pass-group">
                    <input type="password" id="{{.PasswordFieldName}}" name="{{.PasswordFieldName}}"
                    placeholder="Password" value="{{index .FormData .PasswordFieldName}}" 
                    class="pass-input {{if index .FormErrors .PasswordFieldName}}is-invalid{{end}}" /> 
                    {{with index .FormErrors .PasswordFieldName}}
                    <div class="invalid-feedback d-block">{{.}}</div>
                    {{end}}

                  <span class="fas toggle-password fa-eye-slash"></span>
                </div>
              </div>
            </div>

            <div class="col-lg-3 col-sm-6 col-12">
              <div class="form-group">
                <label>Phone Number</label>
                    <input type="text" id="PhoneNumber" name="PhoneNumber"
                    placeholder="Phone Number" value="{{index .FormData
                    "PhoneNumber"}}" class="{{if index .FormErrors
                    "PhoneNumber"}}is-invalid{{end}}" /> {{with index .FormErrors
                    "PhoneNumber"}}
                    <div class="invalid-feedback d-block">{{.}}</div>
                    {{end}}
              </div>
            </div>
            <div class="col-lg-3 col-sm-6 col-12">
              <div class="form-group">
                <label>Email</label>
                 <input type="text" id="Email" name="Email"
                    placeholder="Email" value="{{index .FormData
                    "Email"}}" class="{{if index .FormErrors
                    "Email"}}is-invalid{{end}}" /> {{with index .FormErrors
                    "Email"}}
                    <div class="invalid-feedback d-block">{{.}}</div>
                    {{end}}
              </div>
            </div>

            <div class="col-lg-3 col-sm-6 col-12">
              <div class="form-group">
                <label>Role</label>
                  <select name="Role" id="Role" class="select {{if index .FormErrors "Role"}}is-invalid{{end}}">
                    <option value="">Choose Role</option>
                    <option value="admin" {{if $.FormData}}{{if eq "admin" (index $.FormData "Role")}}selected{{end}}{{end}}>
                      Admin
                    </option>
                    <option value="user" {{if $.FormData}}{{if eq "user" (index $.FormData "Role")}}selected{{end}}{{end}}>
                      User
                    </option>
                     </select>
                   {{with index .FormErrors "Role"}}
                    <div class="invalid-feedback d-block">{{.}}</div>
                  {{end}}
              </div>
            </div>

            <div class="col-lg-3 col-sm-6 col-12">
              <div class="form-group">
                <label>Status</label>
                  <select name="Status" id="Status" class="select {{if index .FormErrors "Status"}}is-invalid{{end}}">
                    <option value="">Choose Status</option>
                    <option value="active" {{if $.FormData}}{{if eq "active" (index $.FormData "Status")}}selected{{end}}{{end}}>
                      Active
                    </option>
                    <option value="inactive" {{if $.FormData}}{{if eq "inactive" (index $.FormData "Status")}}selected{{end}}{{end}}>
                      Inactive
                    </option>
                     </select>
                   {{with index .FormErrors "Status"}}
                    <div class="invalid-feedback d-block">{{.}}</div>
                  {{end}}
              </div>
            </div>

            <div class="col-lg-12">
              <button type="submit" class="btn btn-submit me-2">{{if eq .CurrentPageType "create"}}Submit{{else}}Update{{end}}</button>
              <a href="/users" class="btn btn-cancel">Cancel</a>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
{{end}}
